# Генератор фрактального пламени

Этот проект позволяет генерировать изображения фрактального пламени. Подробнее про эту тему можно узнать в статье: ["The Fractal Flame Algorithm" Scott Draves](https://flam3.com/flame_draves.pdf).

## Результаты работы

Примеры изображений, сгенерированных приложением:

![2024-12-09_00-41-26.png](fractals%2F2024-12-09_00-41-26.png)

![2024-12-09_01-10-50.png](fractals%2F2024-12-09_01-10-50.png)

![2024-12-10_20-48-05.png](fractals%2F2024-12-10_20-48-05.png)

Еще больше изображений вы можете найти в директории [fractals](fractals).

---

## Конфигурация

Перед запуском необходимо задать конфигурацию. Она задается в формате JSON и хранится в файле [config.json](src/main/resources/config.json):

```json
{
    "threads": 8,
    "height": 4096,
    "width": 4096,
    "iterations": 150000000,
    "symmetry": 12,
    "variations": [
        {
            "name": "Spiral",
            "weight": 0.5,
            "color": "#99DDEE"
        },
        {
            "name": "Spherical",
            "weight": 0.3,
            "color": "#B8E6FF"
        },
        {
            "name": "Diamond",
            "weight": 0.2,
            "color": "#E6F7FF"
        }
    ],
    "affine_functions": [
        {
            "a": 0.6,
            "b": -0.2,
            "c": 0.2,
            "d": 0.6,
            "e": 0.2,
            "f": 0.0,
            "weight": 0.25,
            "color": "#99DDEE"
        },
        {
            "a": 0.4,
            "b": 0.3,
            "c": -0.3,
            "d": 0.4,
            "e": -0.2,
            "f": -0.3,
            "weight": 0.3,
            "color": "#B8E6FF"
        }
    ],
    "format": "png"
}
```

### Параметры конфигурации

- `threads`: Количество потоков, выделяемых под процесс генерации.

- `height`, `width`: Разрешение выходного изображения.

- `iterations`: Количество итераций, используемых при генерации.

- `symmetry`: Количество симметричных частей фрактала.

- `variations`: Вариационные функции.

- `affine_functions`: Функции аффинного преобразования, описанные через параметры $a, b, c, d, e, f$.

- `format`: Формат выходного изображения.

### Константы

Также можно изменять некоторые константы в классе [Constants](src/main/java/Constants.java):
- `GAMMA`: Параметр gamma-коррекции.
- `BACKGROUND_COLOR`: Цвет фона.
- `X_RECT`, `Y_RECT`, `WIDTH_RECT`, `HEIGHT_RECT`: Параметры прямоугольной области, в которой генерируется фрактал.


---

## Функции преобразования

Узоры фрактального пламени зависят от комбинации вариационных функций и функций аффинного преобразования. Каждой функции можно задать вес и цвет.

### Доступные вариационные функции

- **Heart**

- **Hyperbolic**

- **Sinusoidal**

- **Bent**

- **Diamond**

- **Disc**

- **Ex**

- **Fisheye**

- **Spherical**

- **Spiral**

- **Symmetry**

- **Swirl**

- **Noise**

### Описание аффинных функций

Аффинные функции задаются следующим образом:

Параметры `a`, `b`, `c`, `d`, `e`, `f` определяют масштабирование, поворот, сдвиг и другие линейные преобразования.
![formula.png](img%2Fformula.png)

---

## Gamma-коррекция

Сгенерированное изображение улучшается с помощью gamma-коррекции. Этот параметр задается в классе `Constants`.

---

## Многопоточность

Программа поддерживает однопоточную и многопоточную генерацию изображений. Количество потоков можно настроить через параметр `threads` в конфигурационном файле. Рекомендуется устанавливать значение, соответствующее числу ядер процессора для оптимальной производительности.

---

**Создавайте свои удивительные фракталы и делитесь ими!**
